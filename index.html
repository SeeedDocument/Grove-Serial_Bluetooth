<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - Serial Bluetooth</title><meta charset="utf-8"/></head><body><div class"container"><a href="../"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - Serial Bluetooth</h1>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><img src="img/Twigbt00.jpg" width="300"/> <div class="thumbcaption"></div></div></div>

<p>Grove - Serial Bluetooth is an easy to use module compatible with the existing Grove Base Shield, and designed for transparent wireless serial connection setup. The serial port Bluetooth module is fully qualified Bluetooth V2.0+EDR(Enhanced Data Rate) 2Mbps Modulation with complete 2.4GHz radio transceiver and baseband. It uses CSR Bluecore 04-External single chip Bluetooth system with CMOS technology and with AFH(Adaptive Frequency Hopping Feature). It has the smallest footprint of 12.7mm x 27mm. Hope it will simplify your overall design/development cycle.
</p><p><b>Model:<a href="http://www.seeedstudio.com/depot/grove-serial-bluetooth-p-795.html?cPath=139_142">WLS31746P</a></b>
</p>
<h2> Specifications</h2>
<ul><li>Operating Voltage: 5.0VDC
</li><li>Data Rate: 2Mbps
</li><li>RF Transmit Power (Max): +4dBm
</li><li>Sensitivity: -80dBm
</li><li>Fully Qualified Bluetooth V2.0+EDR 3Mbps Modulation
</li><li>Selectable baud rate
</li><li>Auto-reconnect in 30 min when disconnected as a result of beyond the range of connection
</li></ul>
<h2>  Demonstration</h2>
<p>In this library we packed are two demos for your project to work in Master mode and Slave mode.
Two Bluetooth modules work as shown below:<br/>
<img src="img/Bluetooth-1.jpg" width="744"/>
</p><p>Connect the module to D6 Port of <a href="/Grove-Base_Shield" title="Grove - Base Shield">Grove - Base Shield</a>:<br/>
<img src="img/Grove-Serial-Bluetooth.JPG" width="600"/><br/>
</p><p><br/>
Install the library in the "Resources" section. If you want to run the project in Master mode, find the demo by the path: File - Examples - Bluetooth_demo_code - Master. And you can find the demo for Slave mode in the same path.<br/>
</p><p>When the Grove - Serial Bluetooth module is in pairing status, the green and red LED links in interval. If connection succeeds, the green LED will blink every 2s. If connection fails, the red LED will blink every 0.5s.<br/>
</p>
<h2> Resources</h2>
<ul><li><a href="res/Bluetooth_demo_code.zip">Serial Bluetooth Library</a>
</li><li><a href="res/Grove-Serial_Bluetooth_eagle_file.zip">Serial Bluetooth Eagle File</a>
</li><li><a href="res/Bluetooth_Software_Instruction.pdf">Bluetooth Software instruction</a>
</li><li><a href="res/Bluetooth_module.pdf">Bluetooth - module Datasheet</a><br/>
</li></ul>
<h2> Reference</h2>
<h4> Flowchat</h4>
<p><img src="img/Bluetooth-2.jpg" width="524"/>
</p>
<h3> Commands to change default configuration</h3>
<p><b>1. Set working MODE</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+STWMOD=0\r\n
</td>
<td width="400px"> Set device working mode as client (slave). Save and Rest.
</td></tr>
<tr>
<td> \r\n+STWMOD=1\r\n
</td>
<td> Set device working mode as server (master). Save and Rest.
</td></tr></table>
<p><b>Note:</b> <b>\r\n</b> is necessary for operation and the value of are <b>0x0D 0x0A</b> in Hex. <b>\r</b> and <b>\n</b> represent <b>carriage-return</b> and <b>line-feed</b>(or next line), 
</p><p><b>2.Set BAUDRATE</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+STBD=115200\r\n
</td>
<td width="400px"> Set baudrate 115200. Save and Rest.
</td></tr>
<tr>
<td colspan="2"> Supported baudrate: 9600, 19200,38400,57600,115200,230400,460800.
</td></tr></table>
<p><b>3. Set Device NAME</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+STNA=abcdefg\r\n
</td>
<td width="400px"> Set device name as “abcdefg”. Save and Rest.
</td></tr></table>
<p><b>4. Auto-connect the last paired device on power</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+STAUTO=0\r\n
</td>
<td width="400px"> Auto-connect forbidden. Save and Rest.
</td></tr>
<tr>
<td width="200px"> \r\n+STAUTO=1\r\n
</td>
<td width="400px"> Permit Auto-connect. Save and Rest.
</td></tr></table>
<p><b>5. Permit Paired device to connect me</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+STOAUT=0\r\n
</td>
<td width="400px"> Forbidden. Save and Rest.
</td></tr>
<tr>
<td width="200px"> \r\n+STOAUT=1\r\n
</td>
<td width="400px"> Permit. Save and Rest.
</td></tr></table>
<p><b>6. Set PINCODE</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+STPIN=2222\r\n
</td>
<td width="400px"> Set pincode “2222”, Save and Rest.
</td></tr></table>
<p><b>7. Delete PINCODE(input PINCODE by MCU)</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+DLPIN\r\n
</td>
<td width="400px"> Delete pincode. Save and Rest.
</td></tr></table>
<p><b>8. Read local ADDRESS CODE</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+RTADDR\r\n
</td>
<td width="400px"> Return address of the device.
</td></tr></table>
<p><b>9. Auto-reconnecting when master device is beyond the valid range (slave device will auto-reconnect in 30 min when it is beyond the valid range)</b>
</p>
<table>
<tr>
<td width="200px"> \r\n+LOSSRECONN=0\r\n
</td>
<td width="400px"> Forbid auto-reconnecting.
</td></tr>
<tr>
<td width="200px"> \r\n+LOSSRECONN=1\r\n
</td>
<td width="400px"> Permit auto-reconnecting.
</td></tr></table>
<h3> Commands for Normal Operation:</h3>
<p><b>1. Inquire</b>
</p>
<table>
<tr>
<td colspan="2" width="600px"> <b>a) Master</b>
</td></tr>
<tr>
<td width="200px"> \r\n+INQ=0\r\n
</td>
<td width="400px"> Stop Inquiring
</td></tr>
<tr>
<td> \r\n+INQ=1\r\n
</td>
<td> Begin/Restart Inquiring
</td></tr>
<tr>
<td colspan="2" width="600px"> <b>b) Slave</b>
</td></tr>
<tr>
<td> \r\n+INQ=0\r\n
</td>
<td> Disable been inquired
</td></tr>
<tr>
<td> \r\n+INQ=1\r\n
</td>
<td> Enable been inquired
</td></tr></table>
<p>When <b>+INQ=1</b> command is successful, the <span style="color:red"> red </span> and <span style="color:green">green</span> LEDS blink alternatively. 
</p><p><b>2. Bluetooth module returns inquiring result</b>
</p>
<table>
<tr>
<td width="250px"> \r\n+RTINQ=aa,bb,cc,dd,ee,ff;name\r\n
</td>
<td width="500px"> Serial Bluetooth device with the address “aa,bb,cc,dd,ee,ff” and the name “name” is inquired
</td></tr></table>
<p><b>3. Connect device</b>
</p>
<table>
<tr>
<td width="250px"> \r\n+CONN=aa,bb,cc,dd,ee,ff\r\n
</td>
<td width="500px"> Connect to a device with address of "aa,bb,cc,dd,ee,ff”
</td></tr></table>
<p><b>4. Bluetooth module requests inputting PINCODE</b>
</p><p>\r\n+INPIN\r\n 
</p><p><b>5. Input PINCODE</b>
</p>
<table>
<tr>
<td colspan="2"> \r\n+RTPIN=code\r\n
</td></tr>
<tr>
<td> Example: RTPIN=0000
</td>
<td> Input PINCODE which is four zero
</td></tr></table>
<p><b>6. Disconnect device</b> Pulling PIO0 high will disconnect current working Bluetooth device. 
</p><p><b>7. Return status</b> \r\n+BTSTA:<b>xx</b>\r\n <br/> <b>xx</b> status: 
</p>
<ul><li>0 - Initializing 
</li><li>1 - Ready 
</li><li>2 - Inquiring 
</li><li>3 - Connecting 
</li><li>4 - Connected
</li></ul>
<p>(<b>Note:</b> This is not a command, but the information returned from the module after every command)
</p>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>